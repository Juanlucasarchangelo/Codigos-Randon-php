<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script type="text/javascript" src="html2canvas.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <style>
        .foto-fundo{
            background-image: url(imagen-lateral.jpg);
            background-repeat: no-repeat;
            background-position: right;
            background-size: auto;
            background-size: 40%;
        }
    </style>
  </head>
  <body>
    <div id="htmltoimage">
        <div class="card w-75 bg-secondary bg-opacity-25 foto-fundo">
            <div class="card-body d-flex p-4">
                <div class="col-8">
                    <div class="row align-items-center pb-2">
                        <div class="col-2">
                            <img src="select.png" width="100%" alt="">
                        </div>
                        <div class="col-auto">
                            <h2 class="mb-0"><strong>Wallison Luan</strong></h2>
                            <h5>Marketing</h5>
                        </div>
                    </div>
                    <div class="row align-items-center pb-3">
                        <div class="col-2 border border-danger border-2">
                        </div>
                        <div class="col">
                            <img src="select.png" width="30" alt="Telefone">
                            <img src="select.png" width="30" alt="Celular">
                            <img src="select.png" width="30" alt="Televisão">
                            <img src="select.png" width="30" alt="Fone">
                            <img src="select.png" width="30" alt="Camera">
                        </div>
                    </div>
                    <div class="row align-items-center pb-3">
                        <div class="col-auto border-end border-3 border-danger">
                            <img src="select.png" width="30" alt="Telefone">
                            <span>(19) 98772-0695</span>
                        </div>
                        <div class="col">
                            <span>(19) 98772-0695</span>
                        </div>
                    </div>
                    <div class="row align-items-center pb-3">
                        <div class="col-auto">
                            <img src="select.png" width="30" alt="Telefone">
                            <span>wallison.ferreira@tipbrasil.com.br</span>
                        </div>
                        <div class="col">
                            <img src="select.png" width="30" alt="Telefone">
                            <span>tipbrasil.com.br</span>
                        </div>
                    </div>
                    <div class="row align-items-center pb-3">
                        <div class="col-auto">
                            <img src="select.png" width="30" alt="Telefone">
                            <span>R. André Gonçalves, 130 - Parque Taquaral - Campinas, São Paulo</span>
                        </div>
                    </div>
                    <div class="row align-items-center pb-3 ps-5 pt-4">
                        <div class="col-8 border border-danger border-2">
                        </div>
                        <div class="col">
                            <img src="select.png" width="30" alt="Telefone">
                            <img src="select.png" width="30" alt="Celular">
                            <img src="select.png" width="30" alt="Televisão">
                            <img src="select.png" width="30" alt="Fone">
                            <img src="select.png" width="30" alt="Camera">
                        </div>
                    </div>
                </div>
                <div class="col-auto">
    
                </div>
            </div>
        </div>
    </div>
    
    <button class="btn btn-success w-75 mt-5" onclick="downloadimage()">Gerar imagem</button>

    <script src="https://code.jquery.com/jquery-3.6.3.js" integrity="sha256-nQLuAZGRRcILA+6dMBOvcRh5Pe310sBpanc6+QBmyVM=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
    <script type="text/javascript">
        function downloadimage(){
            var container = document.getElementById("htmltoimage"); // full page 
            html2canvas(container,{allowTaint : true}).then(function(canvas) {
                // var link = document.createElement("a");
                // document.body.appendChild(link);
                // link.download = "assinatura_email_tip.jpg";
                // link.href = canvas.toDataURL();
                // link.target = '_blank';
                // link.click();
                // link.backgroundColor = null;
                // link.width = "75%";
                var ajax = new XMLHttpRequest();
                ajax.open("POST", "save-capture.php", true);
                ajax.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
                ajax.send("jpg=" + canvas.toDataURL("image/jpeg", 0.9));
                ajax.send("nome = juan");
                ajax.onreadystatechange = function () {
                // Check when the requested is completed
                    if (this.readyState == 4 && this.status == 200) {
                        // Displaying response from server
                        console.log(this.responseText);
                    }
                };
            });
        }
    </script>
  </body>
</html>